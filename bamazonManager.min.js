var mysql=require("mysql"),inquirer=require("inquirer"),conn=mysql.createConnection({host:"localhost",port:3306,user:"root",password:"root",database:"bamazon"});function prompt(){inquirer.prompt([{type:"list",name:"choice",message:"What would you like to do?",choices:["View Products for Sale","View Low Inventory","Add to Inventory","Add New Product","Exit"]}]).then(function(o){console.log(o),"View Products for Sale"===o.choice?viewItems():"View Low Inventory"===o.choice?lowInventory():"Add to Inventory"===o.choice?addInventory():"Add New Product"===o.choice?newProduct():"Exit"===o.choice&&exit()})}function viewItems(){conn.query("SELECT * FROM products",function(o,e){if(o)throw o;console.log("\n###############"),console.log("ITEMS FOR SALE!"),console.log("###############");for(var n=0;n<e.length;n++)console.log("==========================="),console.log("\nID: "+e[n].item_id),console.log("Item: "+e[n].product_name),console.log("Price: $"+e[n].price),console.log("Units: "+e[n].stock_quantity),console.log("\n===========================");setTimeout(function(){prompt()},500)})}function lowInventory(){conn.query("SELECT * FROM products WHERE `stock_quantity` <= 100;",function(o,e){if(o)throw o;console.log("\n#########################"),console.log("ITEMS WITH LOW INVENTORY!"),console.log("#########################");for(var n=0;n<e.length;n++)console.log("==========================="),console.log("\nID: "+e[n].item_id),console.log("Item: "+e[n].product_name),console.log("Price: $"+e[n].price),console.log("Units: "+e[n].stock_quantity),console.log("\n===========================");setTimeout(function(){prompt()},500)})}function addInventory(){conn.query("SELECT * FROM products",function(o,e){if(o)throw o;console.log("\n###############"),console.log("ITEMS!"),console.log("###############");for(var n=0;n<e.length;n++)console.log("==========================="),console.log("\nID: "+e[n].item_id),console.log("Item: "+e[n].product_name),console.log("Price: $"+e[n].price),console.log("Units: "+e[n].stock_quantity),console.log("\n===========================")}),setTimeout(function(){inquirer.prompt([{type:"input",name:"idChoice",message:"Enter the ID of the product you would like to update: "},{type:"input",name:"quantity",message:"Enter the quantity you would like to add: "}]).then(function(o){console.log(o.idChoice),conn.query("SELECT * FROM products WHERE item_id = "+o.idChoice+";",function(e,n){var t=n[0].stock_quantity;if(e)throw e;var c=parseInt(t)+parseInt(o.quantity),i=parseInt(o.idChoice);conn.query("UPDATE products SET ? WHERE ?",[{stock_quantity:c},{item_id:o.idChoice}],function(o,e){}),console.log("UPDATED-INVENTORY: "+c.toString()),console.log("Thank YOU!"),console.log("===========================\n"),setTimeout(function(){prompt()},500)})})},700)}function newProduct(){inquirer.prompt([{type:"input",name:"name",message:"Enter the name of the product you would like to add: "},{type:"input",name:"price",message:"Enter the price of the product: "},{type:"input",name:"department",message:"Enter the department of the product: "},{type:"input",name:"quantity",message:"Enter the quantity of the product: "}]).then(function(o){var e="INSERT INTO products (item_id, product_name, department_name, price, stock_quantity) VALUES ?",n=[[0,o.name,o.department,parseInt(o.price),parseInt(o.quantity)]];conn.query(e,[n],function(o,e){if(o)throw o;console.log("Number of records inserted: "+e.affectedRows+"\n"),console.log("===========================\n"),setTimeout(function(){prompt()},500)})})}function exit(){conn.end(),process.exit()}conn.connect(function(o){if(o)throw o;console.log("connected as id "+conn.threadId+"\n"),prompt()});