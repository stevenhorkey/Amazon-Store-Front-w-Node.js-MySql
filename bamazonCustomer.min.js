var mysql=require("mysql"),inquirer=require("inquirer"),conn=mysql.createConnection({host:"localhost",port:3306,user:"root",password:"root",database:"bamazon"});function store(){conn.query("SELECT * FROM products",function(o,n){if(o)throw o;console.log("\n###############"),console.log("ITEMS FOR SALE!"),console.log("###############");for(var t=0;t<n.length;t++)console.log("==========================="),console.log("\nID: "+n[t].item_id),console.log("Item: "+n[t].product_name),console.log("Price: $"+n[t].price),console.log("\n===========================");setTimeout(function(){prompt()},500)})}function prompt(){inquirer.prompt([{type:"input",name:"idChoice",message:"Enter the ID of the product you would like to buy: "},{type:"input",name:"quantity",message:"Enter the quantity you would like to buy: "}]).then(function(o){console.log(o.idChoice),conn.query("SELECT * FROM products WHERE item_id = "+o.idChoice+";",function(n,t){var e=t[0].stock_quantity;if(n)throw n;if(e>=o.quantity){var i=e-o.quantity,c=parseInt(o.idChoice);conn.query("UPDATE products SET ? WHERE ?",[{stock_quantity:i},{item_id:c}],function(o,n){}),console.log("####NEW-SALE####");var r=t[0].price*o.quantity;console.log("Your total is: $"+r.toString()),console.log("Thank YOU!"),store()}else console.log("Insufficient quantity!"),store()})})}conn.connect(function(o){if(o)throw o;console.log("connected as id "+conn.threadId+"\n"),store()});