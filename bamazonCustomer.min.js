var mysql=require("mysql"),inquirer=require("inquirer"),conn=mysql.createConnection({host:"localhost",port:8889,user:"root",password:"root",database:"bamazon"});function store(){conn.query("SELECT * FROM products",function(o,t){if(o)throw o;console.log("\n###############"),console.log("ITEMS FOR SALE!"),console.log("###############");for(var n=0;n<t.length;n++)console.log("==========================="),console.log("\nID: "+t[n].item_id),console.log("Item: "+t[n].product_name),console.log("Price: $"+t[n].price),console.log("\n===========================");setTimeout(function(){prompt()},500)})}function prompt(){inquirer.prompt([{type:"input",name:"idChoice",message:"Enter the ID of the product you would like to buy: "},{type:"input",name:"quantity",message:"Enter the quantity you would like to buy: "}]).then(function(o){console.log(o.idChoice),conn.query("SELECT * FROM products WHERE item_id = "+o.idChoice+";",function(t,n){var e=n[0].stock_quantity;if(t)throw t;if(e>=o.quantity){var i=e-o.quantity,c=parseInt(o.idChoice),r=n[0].product_sales+n[0].price*o.quantity;conn.query("UPDATE products SET ? , ? WHERE ?",[{stock_quantity:i},{product_sales:r},{item_id:c}],function(o,t){}),console.log("####NEW-SALE####");var s=n[0].price*o.quantity;console.log("Your total is: $"+s.toString()),console.log("Thank YOU!"),store()}else console.log("Insufficient quantity!"),store()})})}conn.connect(function(o){if(o)throw o;console.log("connected as id "+conn.threadId+"\n"),store()});